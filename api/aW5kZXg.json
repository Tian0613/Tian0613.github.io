{"title":"","date":"2022-10-09T08:35:51.274Z","updated":"2022-10-09T08:35:51.274Z","content":"/**\n * Created by Tang on 2017/4/15.\n */\n$(function () {\n  var SCREEN_WIDTH = window.innerWidth,\n    SCREEN_HEIGHT = window.innerHeight,\n    mouseX = 0,\n    mouseY = 0,\n    windowHalfX = window.innerWidth / 2,\n    windowHalfY = window.innerHeight / 2,\n    SEPARATION = 200,\n    AMOUNTX = 10,\n    AMOUNTY = 10,\n    camera, scene, renderer;\n  init();\n  animate();\n\n  function init() {\n    var container, separation = 100,\n      amountX = 50,\n      amountY = 50,\n      particles, particle;\n    container = document.createElement('div');\n    // 设置css\n    container.style.position = \"fixed\";\n    container.style.top = \"0px\";\n    container.style.left = \"0px\";\n    container.style.zIndex = \"-1\";\n    container.style.opacity = \"0.5\";\n\n    document.body.appendChild(container);\n    camera = new THREE.PerspectiveCamera(75, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 10000);\n    camera.position.z = 1000;\n    scene = new THREE.Scene();\n    renderer = new THREE.CanvasRenderer({\n      alpha: true\n    });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);\n    container.appendChild(renderer.domElement);\n    // particles\n    var PI2 = Math.PI * 2;\n    var material = new THREE.SpriteCanvasMaterial({\n      color: 10263708,\n      program: function (context) {\n        context.beginPath();\n        context.arc(0, 0, 0.5, 0, PI2, true);\n        context.fill();\n      }\n    });\n    for (var i = 0; i < 1000; i++) {\n      particle = new THREE.Sprite(material);\n      particle.position.x = Math.random() * 2 - 1;\n      particle.position.y = Math.random() * 2 - 1;\n      particle.position.z = Math.random() * 2 - 1;\n      particle.position.normalize();\n      particle.position.multiplyScalar(Math.random() * 10 + 450);\n      particle.scale.multiplyScalar(2);\n      scene.add(particle);\n    }\n    // lines\n    for (var i = 0; i < 300; i++) {\n      var geometry = new THREE.Geometry();\n      var vertex = new THREE.Vector3(Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1);\n      vertex.normalize();\n      vertex.multiplyScalar(450);\n      geometry.vertices.push(vertex);\n      var vertex2 = vertex.clone();\n      vertex2.multiplyScalar(Math.random() * 0.3 + 1);\n      geometry.vertices.push(vertex2);\n      var line = new THREE.Line(geometry, new THREE.LineBasicMaterial({\n        color: 10263708,\n        opacity: Math.random()\n      }));\n      scene.add(line);\n    }\n    document.addEventListener('mousemove', onDocumentMouseMove, false);\n    document.addEventListener('touchstart', onDocumentTouchStart, false);\n    document.addEventListener('touchmove', onDocumentTouchMove, false);\n    //\n    window.addEventListener('resize', onWindowResize, false);\n  }\n\n  function onWindowResize() {\n    windowHalfX = window.innerWidth / 2;\n    windowHalfY = window.innerHeight / 2;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n  }\n  //\n  function onDocumentMouseMove(event) {\n    mouseX = event.clientX - windowHalfX;\n    mouseY = event.clientY - windowHalfY;\n  }\n\n  function onDocumentTouchStart(event) {\n    if (event.touches.length > 1) {\n      //event.preventDefault();\n      mouseX = event.touches[0].pageX - windowHalfX;\n      //mouseY = event.touches[ 0 ].pageY - windowHalfY;\n    }\n  }\n\n  function onDocumentTouchMove(event) {\n    if (event.touches.length == 1) {\n      //event.preventDefault();\n      mouseX = event.touches[0].pageX - windowHalfX;\n      //mouseY = event.touches[ 0 ].pageY - windowHalfY;\n    }\n  }\n  //\n  function animate() {\n    requestAnimationFrame(animate);\n    render();\n  }\n\n  function render() {\n    camera.position.x += (mouseX - camera.position.x) * .05;\n    camera.position.y += (-mouseY + 200 - camera.position.y) * .05;\n    camera.lookAt(scene.position);\n    renderer.render(scene, camera);\n  }\n})","comments":true}